<!DOCTYPE html>
<html lang="en">
<%-include('layouts/head')%>

    <body>
        <!-- Navbar -->
        <%-include('layouts/nav')%>

            <!-- Sidebar and Main Content -->
            <div class="d-flex">
                <!-- Sidebar -->
                <%-include('layouts/sidebar')%>

                    <!-- Main Content -->
                    <div class="p-4" style="flex-grow: 1;" id="mainContent">
                        <h1>Welcome to the Admin Dashboard</h1>
                        <p>Select an option from the sidebar to get started.</p>
                        <div class="row mt-4">
                            <div class="col-md-3">
                                <span id="" class="btn btn-primary w-100 mb-3 loadStudentList">List of Students</span>
                            </div>
                            <div class="col-md-3">
                                <a href="/admin/add-exam" class="btn btn-success w-100 mb-3">Add Exam</a>
                            </div>
                            <div class="col-md-3">
                                <a href="/admin/add-question" class="btn btn-warning w-100 mb-3">Add Question</a>
                            </div>
                            <div class="col-md-3">
                                <a href="/admin/accounts" class="btn btn-info w-100 mb-3">Accounts</a>
                            </div>
                        </div>
                    </div>
            </div>

            <!-- Bootstrap JS -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
            <script>
                // Load List of Students dynamically
                $('.loadStudentList').on('click', function () {
                    $.ajax({
                        url: '/admin/list-examinee',
                        method: 'GET',
                        success: function (html) {
                            $('#mainContent').html(html);
                        },
                        error: function (xhr, status, error) {
                            console.error('Error loading student list:', error);
                        }
                    });
                });

                $('#editButton').on('click', function () {
                    console.log('Edit Button Clicked')
                    $.ajax({
                        url: '/admin/edit-student',
                        method: 'GET',
                        success: function (html) {
                            $('#mainContent').html(html);
                        }
                    })
                })




                $(document).ready(function () {
                    // Edit Button Click
                    $('.editButton').click(function () {
                        var studentId = $(this).data('data-id'); // Get the student ID from the data-id attribute

                        // Use AJAX to fetch the edit form
                        $.ajax({
                            url: '/admin/edit-student /' + studentId, // Backend route to fetch the edit form
                            method: 'GET',
                            success: function (html) {
                                // Load the edit form into the #editForm div
                                $('#editForm').html(html);
                            },
                            error: function (xhr, status, error) {
                                console.error('Error loading edit form:', error);
                            }
                        });
                    });
                });
                // Delete Student dynamically
                $('#deleteSelected').on('click', function () {
                    $.ajax({
                        url: '/admin/delete-examinee/',
                        method: 'GET',
                        success: function () {
                            // Add code here if needed
                        }
                    })
                })

            </script>
    </body>

</html>